<!DOCTYPE html>
<html>

<head>
  <title>Auto-Submit Test (Preceding Field)</title>
  <script>
    function logSubmission(source) {
      document.getElementById('result').innerText = 'Form Submitted! (' + source + ')';
      document.getElementById('result').style.color = 'green';
      console.log('Form Submitted via ' + source);
    }

    function handleSubmit(event) {
      event.preventDefault();
      logSubmission('onsubmit event');
      event.target.reset();
    }

    (function () {
      var originalSubmit = HTMLFormElement.prototype.submit;
      HTMLFormElement.prototype.submit = function () {
        logSubmission('form.submit()');
        originalSubmit.apply(this);
      };
    })();
  </script>
</head>

<body>
  <h1>Auto-Submit Test (Preceding Field)</h1>
  <p style="color: green; font-weight: bold;">Expected Result: Auto-Submit YES</p>
  <p>This form SHOULD auto-submit. The heuristic allows focusable fields BEFORE the username.</p>

  <form action="destination.html" method="get" onsubmit="handleSubmit(event)">

    <!-- This field is before the username. It should NOT block auto-submission. -->
    <div style="background-color: #ccffcc; padding: 10px; margin: 10px 0;">
      <label for="company_id">Company ID (Preceding):</label>
      <input type="text" id="company_id" name="company_id">
    </div>

    <div>
      <label for="username">Username:</label>
      <input type="text" id="username" name="username" autocomplete="username">
    </div>

    <div>
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" autocomplete="current-password">
    </div>

    <div>
      <input type="submit" value="Login" id="submit_button">
    </div>
  </form>
  <div id="result" style="font-weight: bold; margin-top: 20px; font-size: 24px;">Waiting...</div>
</body>

</html>
